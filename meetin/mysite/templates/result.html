<!DOCTYPE html>
<html lang="ko">
<head>
  {% load static %}
  <link rel="stylesheet" href="{% static 'myapp/css/result.css' %}" />
</head>
<body>
  {% include 'index.html' %}

  <main class="ResultContent">
    <div id="Result">
      <!-- 메인 제목 -->
      <div id="box1">
        <span style="color: rgb(241, 48, 128); text-emphasis-style: dot">
          <strong>매칭된</strong>
        </span>
        <span style="color: rgb(241, 48, 128); text-emphasis-style: dot">
          <strong>상대</strong>
        </span>
      </div>

      <!-- 매칭된 상대 정보 박스들 -->
      {% for num in peoplenum_range %}
        <div id="box{{ num }}">
          <p><strong>{{ peoplenum_display }}</strong></p>
        </div>
        <div id="box{{ num|add:"1" }}" onclick="goYouInfo('{{ num }}')">
          <p><strong>상대정보<br /><span style="color: violet">확인</span></strong></p>
        </div>
        <div id="box{{ num|add:"2" }}" onclick="goKakao('{{ num }}')">
          <p><strong>카톡아이디<br /><span style="color: violet">확인</span></strong></p>
        </div>
      {% endfor %}
    </div>

    <!-- JavaScript -->
    <script>
      function goYouInfo(boxId) {
          location.href = boxId ? '/youinfo/' : '/error/';
      }

      function goKakao(boxId) {
          if (boxId) {
              location.href = '/kakao/';
          } else {
              location.href = '/error/';
          }
      }

      var peoplenum = {{ user_info.peoplenum }};
      var suc = {{ matched_profile.matching_success }};
      numcheck(peoplenum, suc);

      function numcheck(peoplenum, suc) {
          for (let i = 2; i <= 13; i += 3) {
              let boxMain = document.getElementById(`box${i}`);
              let boxInfo = document.getElementById(`box${i+1}`);
              let boxKakao = document.getElementById(`box${i+2}`);

              if (peoplenum === i / 3 && suc === 1) {
                  boxMain.style.opacity = 1;
                  boxInfo.style.opacity = 1;
                  boxKakao.style.opacity = 1;

                  boxInfo.style.pointerEvents = "all";
                  boxKakao.style.pointerEvents = "all";
              }
          }
      }
    </script>
  </main>
</body>
</html>